<!DOCTYPE html>
<html lang="fr">
<head>
  <title>API PMSIpilot</title>
  <meta charset="utf-8">
  <link rel="stylesheet" href="css/bootstrap.min.css">
  <link rel="stylesheet" href="css/base.css">
</head>
<body>
  <div class="topbar">
    <div class="fill">
      <div class="container">
        <a class="brand" href="index.html">Présentation</a>
        <a class="brand" href="documentation.html">Documentation</a>
        <a class="brand" href="contact.html">Contact</a>
      </div>
    </div>
  </div>
  <div class="container">
    <div id="breadcrumbs">
      <div class="breadcrumb">
        <a href="documentation.html">Documentation</a> → <a href="#">API identités</a>
      </div>
    </div><!-- end #breadcrumbs -->
    <div class="content row">
      <div class="span12">
        <h1 id="title">API identités</h1>
        <h2 id="recuperation-liste-identites">Récupération de la liste des identités</h2>
        <pre><strong>GET</strong> api/identites.json?token=#{token}</pre>
        <p class="request">Si le paramètre <code>token</code> est spécifié, seules les identités ajoutées ou modifiées depuis ce token seront retournées.</p>
        <p class="response">L'API retourne un code 200 ("OK"), la liste des <a href="structure-identite.html">identités</a> triées par date de création (les plus récentes en premières) et le dernier token utilisé.</p>
        <pre class="highlight">
{
  token: 2587,
  data: [{
    [{...}],
    [{...}],
    ...
  }]
}</pre>
        <h2 id="recuperation-identite">Récupération d'une identité</h2>
        <pre><strong>GET</strong> api/identites.json/#{ipp}</pre>
        <p class="request">Le paramètre <span class="label">obligatoire</span> <code>ipp</code> permet de cibler l'identité à retourner.</p>
        <p class="response">L'API retourne un code 200 ("OK") et l'<a href="structure-identite.html">identité</a> demandée.</p> 
        
        <h2 id="ajout-identite">Ajout d'une identité</h2>
        <pre><strong>POST</strong> api/identites.json</pre>
        <p class="request">Une <a href="structure-identite.html">structure identité</a> doit être passée en paramétre.</p>
        <p class="response">L'API retourne un code 201 ("Created").</p> 

        <h2 id="modification-identite">Modification d'une identité</h2>
        <pre><strong>PUT</strong> api/identites.json/#{ipp}</pre>
        <p class="request">Le paramètre <span class="label">obligatoire</span> <code>ipp</code> permet de cibler l'identité à modifier.<br />Une <a href="structure-identite.html">structure identité</a> doit être passée en paramétre.</p>
        <p class="response">L'API retourne un code 204 ("No Content").</p> 

        <h2 id="fusion-identites">Fusion de deux identités</h2>
        <pre><strong>PUT</strong> api/identites.json/#{ipp-destination}/merge/#{ipp-source}</pre>
        <p class="request">Le paramètre <span class="label">obligatoire</span> <code>ipp-source</code> permet de cibler l'identité source : celle qui va fusionner et disparaitre.<br />
          Le paramètre <span class="label">obligatoire</span> <code>ipp-destination</code> permet de cibler l'identité destination : celle dans laquelle l'identité source va être fusionnée.</p>
        <p class="response">L'API retourne un code 204 ("No Content").</p> 

        <h2 id="suppression-identite">Suppression d'une identité</h2>
        <pre><strong>DELETE</strong> api/identites.json/#{ipp}</pre>
        <p class="request">Le paramètre <span class="label">obligatoire</span> <code>ipp</code> permet de cibler l'identité à supprimer.</p>
        <p class="response">L'API retourne un code 204 ("No Content").</p> 
      </div>
      <div class="span5">
        <div class="block-api">
          <h3>API</h3>
          <table>
            <tbody>
            <tr><td><a href="identites.html">api/identites</a></td></tr>
            <tr><td><a href="sejours.html">api/sejours</a></td></tr>
            <tr><td><a href="mouvements.html">api/mouvements</a></td></tr>
            </tbody>
          </table>
          <h3>Structures</h3>
          <table>
            <tbody>
            <tr><td><a href="structure-identite.html">structure/identite</a></td></tr>
            <tr><td><a href="structure-sejour.html">structure/sejour</a></td></tr>
            <tr><td><a href="structure-mouvement.html">structure/mouvement</a></td></tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div> <!-- /container -->
  <footer>

  </footer>
  <script type="text/javascript">window.hijs = '.highlight';</script>
  <script type="text/javascript" src="js/hijs.js"></script>
</body>
</html>
